<h1>Banquidle</h1>

<div id="flash">
  <%= render "layouts/flash" %>
</div>

<%= form_with url: submit_guess_game_index_path, data: { turbo_stream: true }, method: :post, id: "guess-form" do |f| %>
  <%= f.text_field :quickname, placeholder: "Quickname d'une personne" %>
  <%= f.submit "Envoyer" %>
<% end %>

<div>
  <ul id="guesses">
    <%= render partial: "people/person",
               collection: @people,
               locals: { todays: @todays_person } if defined?(@people) %>
  </ul>
</div>

<p>Person to guess : <%= @todays_person.quickname %></p>

<script>
    document.addEventListener("turbo:submit-end", function (event) {
        if (event.target.id === "guess-form") event.target.reset()
    })
</script>